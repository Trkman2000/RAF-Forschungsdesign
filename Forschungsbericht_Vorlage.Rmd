---
title: "226305 Forschungsbericht"
subtitle: "Analyse des Beziehungsnetzwerks eines Semesters"
author: "Swaran Sandhu | sandhu@hdm-stuttgart.de"
date: "Sommersemester 2020"
output:
  html_document:
    df_print: paged
    toc: true
    toc_depth: 3
    number_sections: true
---

__Anleitung__  
Dies ist eine Vorlage für den Forschungsbericht in 226305 Netzwerkanalyse. Sie können die Vorlage für den eigenen Team-Bericht verwenden. Dazu löschen Sie bitte alle Teile, die nicht zum Forschungsbericht gehören, also die Anleitung, Informationen, etc. Der eigentliche Forschungsbericht beginnt ab "Beispielanalyse". Bitte ersetzen Sie den YAML-Header (das ist der Text direkt über diesem Abschnitt durch ihre eigenen Angaben: in Subttitle der Titel Ihres Projekts, bei author die Namen der Teammitglieder). Die weiteren Punkte bei Output müssen Sie nicht verändern, das definiert nur den Output des Dokuments als HTML-Datei. 

__Bitte lesen Sie das Dokument komplett durch!__  

__Pro-Tipps __
_RMarkdown-Anleitung_  
RMarkdown ist hervorragend [dokumentiert](https://rmarkdown.rstudio.com/lesson-1.htm). Für den schnellen Einstieg hilft das Cheat-Sheet in PDF https://rstudio.com/wp-content/uploads/2015/06/rmarkdown-german.pdf.

_Markdown-Dokument erstellen mit Remedy_  
Mit dem RStudio-Plugin  [Remedy](https://thinkr-open.github.io/remedy/) lassen sich schnell und einfach RMarkdown-Dokumente formatieren. Nach der Installation sind die Formatierungsbefehle in RStudio Addins hinterlegt. 

_Netzwerk optimieren mit SNA-Helper_  
Mit dem Paket snahelper [snahelper](http://snahelper.schochastics.net/) lässt sich ein kleines RStudio-Plugin installieren, das einfache Visualisierungsarbeiten abnimmt. Es funktioniert nicht perfekt, hilft aber bei kleineren Netzwerkarbeiten und funktioniert für einfache gerichtete Netzwerke mit einer Relation bis ca. 50 Knoten. Die Programmbibliothek benötigt noch einige weitere abhängige Bibliotheken wie ggraph, diese werden dann automatisch mitinstalliert. 

_Network Science Tutorials_  
Als "Gold-Standard" für Tutorials gelten noch immer die frei verfügbaren [Anleitungen](https://kateto.net/tutorials/) von Katherine Ognyanova. Sie gehen Schritt für Schritt durch den Code, setzen aber teilweise auf andere Pakete.

Mit diesen Informationen und den begleitenden RNotebooks, Selbstlernvideos und Coachings sind Sie in der Lage Ihren Forschungsbericht zu schreiben. 

__Modus der Abgabe__  
Vollständiger Forschungsbericht nach diesem Muster als .rmd Datei auf Moodle sowie die verwendeten Edge- und Nodelists als .csv Dateien und das Codebuch als Markdown-Dokument in einer Zip-Datei. Der Termin ist via Moodle gesteuert. 

_Vorlage verändern_  
Diese Vorlage ist selbsterklärend. Deshalb benötigen Sie nicht alle Angaben aus dem Dokument. 

_Code-Annotationen_  
Ihr R-Code muss annotiert sein, damit Sie zeigen, dass Sie den Code verstanden haben. Das bedeutet nicht, den Code einfach nur zu übernehmen, sondern auch eigenständig zu beschreiben. Die Annotation wird mit # direkt im Code-Chunk durchgeführt.

_Konventionen_  
Wenn Werte nicht vergeben sind werden diese in den Spalten freigelassen. R führt diese automatisch als NA auf, so dass sie nicht mitgerechnet werden.

_Chunks eindeutig benennen_  
Die Bezeichnung der Code-Chunks ist wichtig, damit man sich schnell und sicher im Code zurechtfindet. Bitte achten Sie auf eindeutige Angaben. Sie können in den Optionen der Chunks auch genau definieren, welche Information ausgegeben wird und wie groß die Abbildungen werden sollen.

_Keine Redundanzen_  
Wenn die Überlegungen und der Code sauber ausgeführt sind braucht es meist nur wenige Codezeilen, um ein Ziel zu erreichen. Das bedeutet auch: nicht alles machen, was möglich ist, sondern das, was für das Projekt sinnvoll ist.

_Vorbereitung für edit.data_
Die finalen Visualisierungen lassen sich gut als (interaktive) Grafik in edit.data einbauen. Dazu gibt es ein Extra-Skript, das die Publikation auf edit.data vereinfachen soll. 


____Information zum Forschungsbericht____
Diesen Teil können Sie in ihrem Beispiel nachher wieder löschen. Ihr Forschungsbericht beschreibt das Vorgehen und die Analyse Ihres Datensatzes mit entsprechenden Visualisierungen. Weil Sie direkt in RMarkdown den Bericht erstellen, sparen Sie sich umständliche Formatierungen der Grafiken in Word oder einem anderen Programm. 

__Reproduzierbare Ergebnisse als Goldstandard der Forschung__
Die Besonderheit bei R und Markdown ist es, dass Ihre Ergebnisse jederzeit mit dem Code nachgeprüft werden können. Dies ist ein sogenannter "Goldstandard" bei empirischer Forschung.

____Aufbau____
Typischerweise umfasst ein Forschungsbericht folgende Frage (siehe auch Entwicklung des Forschungsdesigns im Seminar). RMarkdown nummeriert die Abschnitte nach den Headins H1, H2, H3 automatisch, auch mit Unterkapiteln. Die Kapitelstruktur ist hier nur als Beispiel angelegt.

__1. Einleitung, Forschungsfrage und Motivation__
Hier geht es vor allem um den Kontext der Forschungsarbeit, die zentrale Forschungsfrage und die Motivation, warum gerade dieses Thema bearbeitet wurde.

__2. Forschungsstand der empirischen und theoretischen Literatur__
Zeigen Sie kurz auf, ob es vergleichbare empirische Studien gibt oder welche theoretischen Konzepte für die Forschung besonders interessant sind. Ziehen Sie hier ein Zwischenfazit in dem klar die Forschungsfrage der Arbeit benennt wird. Diese können in Form von (falsifizierbaren) Hypothesen oder auch explorativ beschrieben werden.

__3. Datenerhebung: Zugang, Bereinigung und Codebuch__
Bei jeder empirischen Forschung ist der Umgang mit Daten zentral. Deshalb müssen Sie offenlegen, nach welchen Kriterien Sie die Daten erhoben haben. Dazu gehört die Systematik des Datenzugangs (öffentliche Quellen (Veröffentlichungen, Presse- und Medieninhalte), Internet-Quellen (z.B. Twitter, Instagram, Wikipedia, Websites), eigene Erhebung (z.B. Interview oder Umfrage mit Fragebogen im Anhang und Auswahlkriterien des Samples), Datenbanken (z.B. personenbezogene Daten aus dem Munzinger Archiv), etc.Das Codebuch ist zentral, um die Analyse der Daten nachvollziehen zu können. Achten Sie bitte hier auf die Vollständigkeit aller angegebenen Attribute. 

__4. Analyse und Interpretation__
In diesem Abschnitt geht es vor allem um die Analyse des Netzwerks. Dazu können Sie alle Analysemöglichkeiten einsetzen, die wir behandelt haben. Das beginnt bei der Beschreibung der _Art des Netzwerks_ (die auch in igraph automatisch ausgegeben wird)
- Richtung (gerichtet/ungerichtet)
- Art (one-mode/two-mode)
- Gewichtung (gewichtet/ungewichtet)

Achten Sie bitte darauf, dass Sie die notwendigen Bereinigungen des Netzwerks (also z.B. doppelte Beziehungen, etc. ggf. mit dem simplifiy() Befehl vorher durchführen, damit Basis-Netzwerk als Ausgangspunkt für alle Formen der Analyse möglichst gut beschrieben werden kann). Denken Sie hier besonders an 

Wichtig: führen Sie nur die Analysen durch, die für ihre Forschungsfrage auch zielführend sind. Es macht wenig Sinn, alle möglichen Analysen durchzuführe, nur weil sie möglich sind. Bleiben Sie eng an ihrer Forschungsfrage!

_a) generelle Beschreibung des Netzwerks_
- Anzahl Knoten/Kanten
- Anzahl Komponenten
- Netzwerkdichte des Gesamtnetzwerks (oder ggf. der Hauptkomponente)
- Durchmesser des Netzwerks
- maximale Pfaddistanz

_b) Teilnetzwerke (im Vergleich)_
- Komponenten, Cluster, Cliquen liefern eine genauere Beschreibung von Netzwerken
- Teilnetzwerke nach bestimmten Netzwerkattributen (Vertex- oder Edge-Attribute), d.h. nach bestimmten Eigenschaften wie Geschlecht, Alter, etc. Der Vergleich bestimmter Teilnetzwerke liefert Ihnen die Möglichkeit, bestimmte Annahmen zu überprüfen.
- Ego-Netzwerke (erster Ordnung, zweiter Ordnung) als Fokus auf besonders wichtige Akteure im Netzwerk

*Denken Sie daran, dass Aussagen von Teilnetzwerken erst durch den Vergleich relevant werden*

_c) Positionale bzw. Akteursmaße (Zentralitätsmaße)_
- Zentralitätsmaße liefern uns Aussagen über die Bedeutung von einzelnen Akteuren innerhalb des Netzwerks. Achten Sie bitte hier zunächst darauf, ob Sie das Gesamtnetzwerk oder ein Teilnetzwerk analysieren. Die Zentralitätsmaße können sich entsprechend verschieben.
- Die wichtigsten Zentralitätsmaße sind Degree, Betweenness und Closeness bzw. Eigenvektor. Es gibt noch viele andere Zentralitätsmaße, aber auf jeden Fall sollten Degree und Betweenness berechnet und interpretiert werden.

_d) Fortgeschrittene Analysen (Kür)_
- Teilweise lassen sich (je nach Datensatz) fortgeschrittenen Analysen wie etwa Transitivität oder Homophilie durchführen. Das ist aber "Bonus".
- Gleiches gilt für Landkarten und Zeitverläufe oder Zeitachsenanalysen.

__5. Visualisierung des Netzwerks__
Die Visualisierung erfolgt nicht sequentiell wie in den Übungen, sondern zeigt die überzeugendsten Netzwerkvisualisierungen aus ihrem Projekt. Dazu ist es sinnvoll den Code für die Visualisierung direkt hier und komplett einzufügen. Vorhergehende Visualisierung sind teilweise hilfreich, aber nicht so entscheidend wie das Endprodukt.(Diese Visualisierung kann auch ein Teilergebnis für edit.data sein). Achten Sie auf die Grundlagen guter Visualisierung: Lesbarkeit, sinnvoll gewählte Farben, etc.

__6. Diskussion: Fazit, Limitationen und Ausblick__
Das letzte Kapitel diskutiert die Ergebnisse, benennt die Limitationen (aber auch kritisch: lessons learned) und gibt einen Ausblick auf weitere Forschung in diesem Bereich.

__7. Literatur und Anhang__
a) verwendete Literatur
b) Codebuch (Link auf Github)
c) verwendete Datenquellen (Link auf Github Edge- und Nodelist)
d) komplettes annotiertes RNotebook (Link auf Github)
e) TeilnehmerInnen des Projekts und Arbeitsaufwand im Projekt.


__Beginn Forschungsbericht / alles darüber löschen! __

# Zusammenfassung (Abstract)
Der Forschungsbericht untersucht die Beziehungsnetzwerke eines Semesters an der Hochschule. Die unterschiedlichen Beziehungsarten zeigen, dass sich Cliquen und Cluster entlang der Homophilie von Studierenden entwickelt. 
Keywords: Netzwerkanalyse, Teilnetzwerke, Cliquen, Homophilie


# Einleitung
Wir untersuchen die wichtigsten Akteure in einem (fiktiven) studentischen Netzwerk aus dem Studiengang CR/PR, 3. Semester. Dabei interessiert uns besonders, ob es besonders zentrale Akteure innerhalb des Netzwerks gibt. Für das Netzwerk wurden 38 Studierende mit einem Fragebogen nach soziodemographischen Variablen (Alter, Geschlecht, Haarfarbe, Augenfarbe) sowie Verhaltensmuster (Vertiefungsrichtung, Konsum von Tabakwaren, Vorhandensein von Tattoos) befragt. Auf der Beziehungsebene interessiert uns, wer mit präferiert zusammenarbeit, wer besonders um Rat gefragt wird und wer eine Liebesbeziehung innerhalb des Netzwerks hat. 


# Vorarbeiten und vergleichbare Studien
## Forschungsstand
Das Forschungsdesign lehnt sich zum einen an die lange Tradition der Netzwerkanalyse in der Schulforschung an (Dunkake 2012). Es greift zudem die klassische Studie von Krackhardt (1987) auf, der ein Ratsuche und Unterstützungsnetzwerk in einem Unternehmen untersuchte. 

## Arbeitshypothesen
Wir gehen von folgenden Arbeitshypothesen aus:
a) Ratsuche: Der Knoten mit dem höchsten Indegree hat wahrscheinlich die Funktion des Semestersprechers.
b) Zusammenarbeit: orientiert sich primär an Homophilie, d.h. gleiche Vertiefungsrichtung.

Ansonsten hat die Analyse einen überwiegend explorativen Charakter.

# Datenerhebung: Zugang, Bereinigung und Codebuch

## Zugang
Studierende wurden innerhalb der Veranstaltung 226305a vom Dozierenden mit einem Online-Fragebogen befragt im Sommersemester 2017 befragt.

## Bereinigung des Datensatzes
Der Datensatz wurde anschließend anonymisiert. Die Relationen Ratsuche und Zusammenarbeit sind erhalten geblieben, die Beziehungen Liebe sind fiktiv. Der Datensatz ist unter [Github](https://github.com/hdm-crpr/226305/tree/master/data/crpr2) verfügbar.

## Codebuch
Das [Codebuch](https://github.com/hdm-crpr/226305/blob/master/data/crpr2/codebuch.md) beschreibt die Variablen, Relationen und Gewichte des Netzwerks und ist ebenfalls auf Github hinterlegt.

# Analyse und Interpretation

## Das Gesamtnetzwerk

Das Gesamtnetzwerk umfasst 38 Knoten und 176 Beziehungen (siehe igraph-Objekt). Es ist gerichtet und gewichtet.

```{r Gesamnetzwerk erstellen, echo=FALSE, message=FALSE, warning=FALSE, paged.print=TRUE}

library(igraph)

# Einlesen der Edge- und Nodelist
el <- read.csv("https://raw.githubusercontent.com/hdm-crpr/226305/master/data/crpr2/edges.csv", header=T, as.is=T, sep = ",")
nodes <- read.csv("https://raw.githubusercontent.com/hdm-crpr/226305/master/data/crpr2/nodes.csv", header=T, as.is=T, sep = ",")

# Matrix erstellen
edgematrix <-as.matrix(el)

# Zusammenführen von Edge- und Nodelist als igraph-Objekt s
s <- graph_from_data_frame(d=edgematrix, vertices=nodes, directed=T)
s
```

```{r Beschreibung des Netzwerks, message=FALSE, warning=FALSE, paged.print=TRUE}
# Parameter zu Beschreibung des Netzwerks

## ist das Netzwerk bereits vereinfacht?
is.simple(s)

## besteht das Netzwerk aus Komponenten?
## wenn ja, wie vielen?
is.connected(s)
components(s)

## Dichte des Netzwerks
edge_density(s, loops=FALSE)

## Umfang des Netzwerks
diameter(s)

## Pfaddistanzen (Distance)
farthest_vertices(s)
```

Das Hauptnetzwerk besteht aus zwei Komponenten mit 32 und 6 Knoten, die nicht miteinander verbunden sind. Die Dichte im Netzwerk beträgt 12,51 Prozent von allen möglichen Verbindungen. Die maximale Pfaddistanz beträgt 18 Schritte.

## Teilnetzwerke

## Netzwerkmaße

## Positionale Maße

# Visualisierung des Netzwerks

```{r Einfache Visualisierung des erstellten Objekt, fig.height=10, fig.width=14, message=TRUE, warning=TRUE, paged.print=TRUE}

# Pro-Tipp: die Ausgabe jedes "chunks" lässt sich über das Rädchen direkt unter der Chunk-Beschreibung einstellen. Hier habe ich die Bildfläche auf 10 auf 16 Inches eingestellt, d.h. das Netzwerk wird automatisch auf eine Fläche von 10 auf 16 Inches geplottet. Für den Anfang empfehle ich immer bei Netzwerken bis 50 Knoten mit dem Kamada-Kawai Algorithmus zu arbeiten, weil hier die Knoten immer an die gleiche Position gesetzt werden und wir dadurch Abweichungen besser erkennen können.

plot(s,
     asp=0, 
     layout=layout_with_kk,
     edge.arrow.size=.5,
     vertex.size=10,
     main ="Übersicht Gesamtnetzwerk")
```


# Literatur und Anhang  

__a) verwendete Literatur__  
Dunkake I. (2012). Soziale Netzwerke von Schülern: Beispiele angewandter Netzwerkanalysen. In: Hennig M. & Stegbauer C. (Hg.): Die Integration von Theorie und Methode in der Netzwerkforschung. Wiesbaden: VS Verlag für Sozialwissenschaften, S. 133-155.

Krackhardt D. (1987). Cognitive social structures. Social Networks, 9, 104-134.  

Luke, D. A. (2015). A user's guide to network analysis in R. Cham, Switzerland: Springer.  

Ognyanova, K.(2019). Network Visualization with R. Sunbelt 2019 Workshop, Montreal, Canada. www.kateto.net/sunbelt2019   

__b) Codebuch (Link auf Github)__  
__c) verwendete Datenquellen (Link auf Github Edge- und Nodelist)__  
__d) komplettes annotiertes RNotebook (Link auf Github)__  
__e) TeilnehmerInnen des Projekts und Arbeitsaufwand im Projekt__  



